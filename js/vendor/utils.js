// usage: log('inside coolFunc', this, arguments);
// paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/
window.log=function(){log.history=log.history||[],log.history.push(arguments);if(this.console){var b=arguments,c;c=[].slice.call(b),typeof console.log=="object"?log.apply.call(console.log,console,c):console.log.apply(console,c)}};

// make it safe to use console.log always
(function(a){function b(){}for(var c="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),d;!!(d=c.pop());){a[d]=a[d]||b;}})
    (function(){try{console.log();return window.console;}catch(a){return (window.console={});}}());


// place any jQuery/helper plugins in here, instead of separate, slower script files.

// JSON stringify & parse
var JSON;JSON||(JSON={}),function(){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)typeof rep[c]=="string"&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();

/*
 JS Signals <http://millermedeiros.github.com/js-signals/>
 Released under the MIT license
 Author: Miller Medeiros
 Version: 0.7.4 - Build: 252 (2012/02/24 10:30 PM)
 */
(function(h){function g(a,b,c,d,e){this._listener=b;this._isOnce=c;this.context=d;this._signal=a;this._priority=e||0}function f(a,b){if(typeof a!=="function")throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b));}var e={VERSION:"0.7.4"};g.prototype={active:!0,params:null,execute:function(a){var b;this.active&&this._listener&&(a=this.params?this.params.concat(a):a,b=this._listener.apply(this.context,a),this._isOnce&&this.detach());return b},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},getListener:function(){return this._listener},_destroy:function(){delete this._signal;delete this._listener;delete this.context},isOnce:function(){return this._isOnce},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}};e.Signal=function(){this._bindings=[];this._prevParams=null};e.Signal.prototype={memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(a,b,c,d){var e=this._indexOfListener(a,c);if(e!==-1){if(a=this._bindings[e],a.isOnce()!==b)throw Error("You cannot add"+(b?"":"Once")+"() then add"+(!b?"":"Once")+"() the same listener without removing the relationship first.");}else a=new g(this,a,b,c,d),this._addBinding(a);this.memorize&&this._prevParams&&a.execute(this._prevParams);return a},_addBinding:function(a){var b=this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a,b){for(var c=this._bindings.length,d;c--;)if(d=this._bindings[c],d._listener===a&&d.context===b)return c;return-1},has:function(a,b){return this._indexOfListener(a,b)!==-1},add:function(a,b,c){f(a,"add");return this._registerListener(a,!1,b,c)},addOnce:function(a,b,c){f(a,"addOnce");return this._registerListener(a,!0,b,c)},remove:function(a,b){f(a,"remove");var c=this._indexOfListener(a,b);c!==-1&&(this._bindings[c]._destroy(),this._bindings.splice(c,1));return a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(a){if(this.active){var b=Array.prototype.slice.call(arguments),c=this._bindings.length,d;if(this.memorize)this._prevParams=b;if(c){d=this._bindings.slice();this._shouldPropagate=!0;do c--;while(d[c]&&this._shouldPropagate&&d[c].execute(b)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll();delete this._bindings;delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};typeof define==="function"&&define.amd?define(e):typeof module!=="undefined"&&module.exports?module.exports=e:h.signals=e})(this);

/*
 fgnass.github.com/spin.js#v1.2.4
 You can now create a spinner using any of the variants below:

 $("#el").spin(); // Produces default Spinner using the text color of #el.
 $("#el").spin("small"); // Produces a 'small' Spinner using the text color of #el.
 $("#el").spin("large", "white"); // Produces a 'large' Spinner in white (or any valid CSS color).
 $("#el").spin({ ... }); // Produces a Spinner using your custom settings.

 $("#el").spin(false); // Kills the spinner.
 */
(function(a,b,c){function g(a,c){var d=b.createElement(a||"div"),e;for(e in c)d[e]=c[e];return d}function h(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function j(a,b,c,d){var g=["opacity",b,~~(a*100),c,d].join("-"),h=.01+c/d*100,j=Math.max(1-(1-a)/b*(100-h),a),k=f.substring(0,f.indexOf("Animation")).toLowerCase(),l=k&&"-"+k+"-"||"";return e[g]||(i.insertRule("@"+l+"keyframes "+g+"{"+"0%{opacity:"+j+"}"+h+"%{opacity:"+a+"}"+(h+.01)+"%{opacity:1}"+(h+b)%100+"%{opacity:"+a+"}"+"100%{opacity:"+j+"}"+"}",0),e[g]=1),g}function k(a,b){var e=a.style,f,g;if(e[b]!==c)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(g=0;g<d.length;g++){f=d[g]+b;if(e[f]!==c)return f}}function l(a,b){for(var c in b)a.style[k(a,c)||c]=b[c];return a}function m(a){for(var b=1;b<arguments.length;b++){var d=arguments[b];for(var e in d)a[e]===c&&(a[e]=d[e])}return a}function n(a){var b={x:a.offsetLeft,y:a.offsetTop};while(a=a.offsetParent)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}var d=["webkit","Moz","ms","O"],e={},f,i=function(){var a=g("style");return h(b.getElementsByTagName("head")[0],a),a.sheet||a.styleSheet}(),o={lines:12,length:7,width:5,radius:10,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},p=function q(a){if(!this.spin)return new q(a);this.opts=m(a||{},q.defaults,o)};p.defaults={},p.prototype={spin:function(a){this.stop();var b=this,c=b.opts,d=b.el=l(g(0,{className:c.className}),{position:"relative",zIndex:c.zIndex}),e=c.radius+c.length+c.width,h,i;a&&(a.insertBefore(d,a.firstChild||null),i=n(a),h=n(d),l(d,{left:(c.left=="auto"?i.x-h.x+(a.offsetWidth>>1):c.left+e)+"px",top:(c.top=="auto"?i.y-h.y+(a.offsetHeight>>1):c.top+e)+"px"})),d.setAttribute("aria-role","progressbar"),b.lines(d,b.opts);if(!f){var j=0,k=c.fps,m=k/c.speed,o=(1-c.opacity)/(m*c.trail/100),p=m/c.lines;!function q(){j++;for(var a=c.lines;a;a--){var e=Math.max(1-(j+a*p)%m*o,c.opacity);b.opacity(d,c.lines-a,e,c)}b.timeout=b.el&&setTimeout(q,~~(1e3/k))}()}return b},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=c),this},lines:function(a,b){function e(a,d){return l(g(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:d,transformOrigin:"left",transform:"rotate("+~~(360/b.lines*c)+"deg) translate("+b.radius+"px"+",0)",borderRadius:(b.width>>1)+"px"})}var c=0,d;for(;c<b.lines;c++)d=l(g(),{position:"absolute",top:1+~(b.width/2)+"px",transform:b.hwaccel?"translate3d(0,0,0)":"",opacity:b.opacity,animation:f&&j(b.opacity,b.trail,c,b.lines)+" "+1/b.speed+"s linear infinite"}),b.shadow&&h(d,l(e("#000","0 0 4px #000"),{top:"2px"})),h(a,h(d,e(b.color,"0 0 1px rgba(0,0,0,.1)")));return a},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}},!function(){var a=l(g("group"),{behavior:"url(#default#VML)"}),b;if(!k(a,"transform")&&a.adj){for(b=4;b--;)i.addRule(["group","roundrect","fill","stroke"][b],"behavior:url(#default#VML)");p.prototype.lines=function(a,b){function e(){return l(g("group",{coordsize:d+" "+d,coordorigin:-c+" "+ -c}),{width:d,height:d})}function k(a,d,f){h(i,h(l(e(),{rotation:360/b.lines*a+"deg",left:~~d}),h(l(g("roundrect",{arcsize:1}),{width:c,height:b.width,left:b.radius,top:-b.width>>1,filter:f}),g("fill",{color:b.color,opacity:b.opacity}),g("stroke",{opacity:0}))))}var c=b.length+b.width,d=2*c,f=-(b.width+b.length)*2+"px",i=l(e(),{position:"absolute",top:f,left:f}),j;if(b.shadow)for(j=1;j<=b.lines;j++)k(j,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(j=1;j<=b.lines;j++)k(j);return h(a,i)},p.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}else f=k(a,"animation")}(),a.Spinner=p})(window,document);
(function(a){a.fn.spin=function(b,c){var d={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}};if(Spinner)return this.each(function(){var e=a(this),f=e.data();f.spinner&&(f.spinner.stop(),delete f.spinner),b!==!1&&(typeof b=="string"&&(b in d?b=d[b]:b={},c&&(b.color=c)),f.spinner=(new Spinner(a.extend({color:e.css("color")},b))).spin(this))});throw"Spinner class not available."}})(jQuery);

/*!
 * jCarousel v@VERSION - Riding carousels with jQuery
 * http://sorgalla.com/jcarousel/
 *
 * Copyright 2011, Jan Sorgalla
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * or GPL Version 2 (http://www.opensource.org/licenses/gpl-2.0.php) licenses.
 *
 * Date: @DATE
 */
(function(a,b){var c=function(a){return parseFloat(a)||0},d=Array.prototype.slice,e={};e.version="@VERSION",e.error=function(a){throw new Error(a)},e.noop=function(){},e.proxy=function(a,b){var c=d.call(arguments,2);return function(){return a.apply(b,c.concat(d.call(arguments)))}},e.clone=function(b){if(a.isFunction(b.clone))return b.clone(!0);var c=a();return b.each(function(){c=c.add(this.cloneNode(!0))}),c},e.innerWidth=function(a){return c(a.css("width"))+c(a.css("padding-left"))+c(a.css("padding-right"))},e.innerHeight=function(a){return c(a.css("height"))+c(a.css("padding-top"))+c(a.css("padding-bottom"))},e.outerWidth=function(a){return e.innerWidth(a)+c(a.css("margin-left"))+c(a.css("margin-right"))+c(a.css("border-left-width"))+c(a.css("border-right-width"))},e.outerHeight=function(a){return e.innerHeight(a)+c(a.css("margin-top"))+c(a.css("margin-bottom"))+c(a.css("border-top-width"))+c(a.css("border-bottom-width"))};var f=/^(?:body|html)$/i;e.position=function(d){var e=d.get(0).offsetParent||b.document.body;while(e&&!f.test(e.nodeName)&&a(e).css("position")==="static")e=e.offsetParent;e=a(e);var g=d.offset(),h=f.test(e[0].nodeName)?{top:0,left:0}:e.offset();return g.top-=c(d.css("margin-top")),g.left-=c(d.css("margin-left")),h.top+=c(e.css("border-top-width")),h.left+=c(e.css("border-left-width")),{top:g.top-h.top,left:g.left-h.left}};var g=/^([+\-]=)?(.+)$/;e.parseTarget=function(a){var b=!1,c=typeof a!="object"?g.exec(a):null;return c?(a=parseInt(c[2],10)||0,c[1]&&(b=!0,c[1]==="-="&&(a*=-1))):typeof a!="object"&&(a=parseInt(a,10)||0),{target:a,relative:b}},e.detectCarousel=function(b){var c=b.data("jcarousel"),d=function(b){var c;return b.find(".jcarousel").each(function(){c=a(this).data("jcarousel");if(c)return!1}),c};if(!c)while(b.size()>0){c=d(b);if(c)break;b=b.parent()}return c},e.Plugin={version:e.version,options:{},pluginName:null,pluginClass:null,pluginFn:null,_element:null,_carousel:null,_options:e.noop,_init:e.noop,_destroy:e.noop,_create:function(){this.carousel()._bind("destroy."+this.pluginName,e.proxy(this.destroy,this))},destroy:function(){return this._destroy(),this.carousel()._unbind("."+this.pluginName).element().unbind("."+this.pluginName),this.element().unbind("."+this.pluginName).removeData(this.pluginName),this},element:function(){return this._element},option:function(b,c){if(arguments.length===0)return a.extend({},this.options);if(typeof b=="string"){if(typeof c=="undefined")return typeof this.options[b]=="undefined"?null:this.options[b];this.options[b]=c}else a.isFunction(b)&&(b=b.call(this)),this.options=a.extend({},this.options,b);return this},carousel:function(){return this.options.carousel?this.options.carousel.jquery?this.options.carousel.data("jcarousel"):this.options.carousel:(this._carousel||(this._carousel=e.detectCarousel(this.element()),this._carousel||e.error('Could not detect carousel for plugin "'+this.pluginName+'"')),this._carousel)},_bind:function(a,b,c){return(c||this.element()).bind(this.pluginName+a,b),this},_unbind:function(a,b,c){return(c||this.element()).unbind(this.pluginName+a,b),this},_trigger:function(b,c,d){var e=a.Event((this.pluginName+b).toLowerCase());return d=[this].concat(d||[]),(c||this.element()).trigger(e,d),a.isFunction(e.isDefaultPrevented)?!e.isDefaultPrevented():!e.defaultPrevented}};var h={};e.plugin=function(b,c){if(typeof c=="undefined")return typeof h[b]=="undefined"?e.error('No such plugin "'+b+'" registered'):h[b].call(e,a);h[b]=c;var f,g,i;b!=="jcarousel"?(f="jcarousel"+b.toLowerCase(),g="jcarousel-"+b.toLowerCase(),i="jcarousel"+b.charAt(0).toUpperCase()+b.slice(1)):f=g=i=b;var j=function(b,c){if(!this._init)return new j(b,c);this._element=a(b).data(f,this).addClass(g),this.options=a.extend({},this.options,this._options(),c),this._create(),this._init()};return j.prototype=a.extend({},e.Plugin,{pluginName:f,pluginClass:g,pluginFn:i},c.call(e,a)),a.fn[i]=function(b){var c=d.call(arguments,1),g=this;return typeof b=="string"?this.each(function(){var d=a(this).data(f);if(!d)return e.error("Cannot call methods on "+i+" prior to initialization; "+'attempted to call method "'+b+'"');if(!a.isFunction(d[b])||b.charAt(0)==="_")return e.error('No such method "'+b+'" for '+i+" instance");var h=d[b].apply(d,c);if(h!==d&&typeof h!="undefined")return g=h,!1}):this.each(function(){var c=a(this).data(f);c?b&&c.option(b):j(this,b)}),g},j};var i=b.jCarousel;e.noConflict=function(){return b.jCarousel=i,e},b.jCarousel=e,e.plugin("jcarousel",function(a){var d=this;return{options:{list:"ul",items:"li",animation:400,wrap:null,vertical:null,rtl:null,center:!1},animating:!1,tail:0,inTail:!1,resizeTimer:null,lt:null,vertical:!1,rtl:!1,circular:!1,_list:null,_items:null,_target:null,_first:null,_last:null,_visible:null,_fullyvisible:null,_create:function(){},_init:function(){if(!1===this._trigger("init"))return this;this._reload();var c=this;return this.onWindowResize=function(){c.resizeTimer&&clearTimeout(c.resizeTimer),c.resizeTimer=setTimeout(function(){c.reload()},100)},a(b).bind("resize.jcarousel",this.onWindowResize),this.onAnimationComplete=function(b){c.animating=!1;var d=c.list().find(".jcarousel-clone");d.size()>0&&(d.remove(),c._reload()),c._trigger("animateEnd"),a.isFunction(b)&&b.call(c,!0)},this._trigger("initEnd"),this},destroy:function(){return!1===this._trigger("destroy")?this:(this.element().unbind("."+this.pluginName).removeData(this.pluginName),this.items().unbind(".jcarousel"),a(b).unbind("resize.jcarousel",this.onWindowResize),this._trigger("destroyend"),this)},reload:function(){return!1===this._trigger("reload")?this:(this._reload(),this._trigger("reloadEnd"),this)},list:function(){if(this._list===null){var b=this.option("list");this._list=a.isFunction(b)?b.call(this):this.element().find(b)}return this._list},items:function(){if(this._items===null){var b=this.option("items");this._items=(a.isFunction(b)?b.call(this):this.list().find(b)).not(".jcarousel-clone")}return this._items},target:function(){return this._target},first:function(){return this._first},last:function(){return this._last},visible:function(){return this._visible},fullyvisible:function(){return this._fullyvisible},hasNext:function(){var a=this.option("wrap"),b=this.items().size()-1;return b>=0&&(a&&a!=="first"||this._last.index()<b||this.tail&&!this.inTail)?!0:!1},hasPrev:function(){var a=this.option("wrap");return this.items().size()>0&&(a&&a!=="last"||this._first.index()>0||this.tail&&this.inTail)?!0:!1},scroll:function(b,e,f){if(this.animating)return this;if(!1===this._trigger("scroll",null,[b,e]))return this;a.isFunction(e)&&(f=e,e=!0);var g=d.parseTarget(b);if(g.relative){var h=this.items().size()-1,i=Math.abs(g.target),j,k,l,m;if(g.target>0){var n=this._last.index();if(n>=h&&this.tail)this.inTail?this.options.wrap=="both"||this.options.wrap=="last"?this._scroll(0,e,f):this._scroll(Math.min(this._target.index()+i,h),e,f):this._scrollTail(e,f);else if(n!==h||this.options.wrap!="both"&&this.options.wrap!="last"){j=this._target.index(),k=j+i;if(this.circular&&k>h){m=h,l=this.items().get(-1);while(m++<k)l=this.items().eq(0),l.after(d.clone(l).addClass("jcarousel-clone")),this.list().append(l),this._items=null;this._scroll(l,e,f)}else this._scroll(Math.min(k,h),e,f)}else this._scroll(0,e,f)}else if(this.inTail)this._scroll(Math.max(this._first.index()-i+1,0),e,f);else{j=this._first.index(),k=j-i;if(j!==0||this.options.wrap!="both"&&this.options.wrap!="first")if(this.circular&&k<0){m=k,l=this.items().get(0);while(m++<0){l=this.items().eq(-1),l.after(d.clone(l).addClass("jcarousel-clone")),this.list().prepend(l),this._items=null;var o=c(this.list().css(this.lt)),p=this._dimension(l);this.rtl?o+=p:o-=p,this.list().css(this.lt,o+"px")}this._scroll(l,e,f)}else this._scroll(Math.max(j-i,0),e,f);else this._scroll(h,e,f)}}else this._scroll(g.target,e,f);return this._trigger("scrollend"),this},_reload:function(){var b=this.element(),c=function(){if((""+b.attr("dir")).toLowerCase()==="rtl")return!0;var c=!1;return b.parents("[dir]").each(function(){if(/rtl/i.test(a(this).attr("dir")))return c=!0,!1}),c};this.vertical=this.options.vertical==null?(""+b.attr("class")).toLowerCase().indexOf("jcarousel-vertical")>-1:this.options.vertical,this.rtl=this.options.rtl==null?c():this.options.rtl,this.lt=this.vertical?"top":"left",this._items=null;var d=this._target||this.items().eq(0);return this.circular=this.options.wrap=="circular",this.list().css({left:0,top:0}),d.size()>0&&(this._prepare(d),this.list().find(".jcarousel-clone").remove(),this._items=null,this.circular=this.options.wrap=="circular"&&this._fullyvisible.size()<this.items().size(),this.list().css(this.lt,this._position(d)+"px")),this},_scroll:function(b,d,e){if(this.animating)return this;typeof b!="object"?b=this.items().eq(b):typeof b.jquery=="undefined"&&(b=a(b));if(b.size()===0)return a.isFunction(e)&&e.call(this,!1),this;this.inTail=!1,this._prepare(b);var f=this._position(b),g=c(this.list().css(this.lt));if(f===g)return a.isFunction(e)&&e.call(this,!1),this;var h={};return h[this.lt]=f+"px",this._animate(h,d,e),this},_scrollTail:function(a,b){if(this.animating||!this.tail)return this;var c=d.position(this.list())[this.lt];this.rtl?c+=this.tail:c-=this.tail,this.inTail=!0;var e={};return e[this.lt]=c+"px",this._update({target:this._target.next(),fullyvisible:this._fullyvisible.slice(1).add(this._visible.last())}),this._animate(e,a,b),this},_animate:function(b,c,d){if(this.animating)return this;if(!1===this._trigger("animate"))return this;this.animating=!0;if(!this.options.animation||c===!1)this.list().css(b),this.onAnimationComplete(d);else{var e=this;if(a.isFunction(this.options.animation))this.options.animation.call(this,b,function(){e.onAnimationComplete(d)});else{var f=typeof this.options.animation=="object"?this.options.animation:{duration:this.options.animation},g=f.complete;f.complete=function(){e.onAnimationComplete(d),a.isFunction(g)&&g.call(this)},this.list().animate(b,f)}}return this},_prepare:function(b){var e=b.index(),f=e,g=this._dimension(b),h=this._clipping(),i={target:b,first:b,last:b,visible:b,fullyvisible:g<=h?b:a()},j=this.vertical?"bottom":this.rtl?"left":"right",k,l;this.options.center&&(g/=2,h/=2);if(g<h)for(;;){k=this.items().eq(++f);if(k.size()===0){if(!this.circular)break;k=this.items().eq(0);if(b.get(0)===k.get(0))break;k.after(d.clone(k).addClass("jcarousel-clone")),this.list().append(k),this._items=null}g+=this._dimension(k),i.last=k,i.visible=i.visible.add(k),l=c(k.css("margin-"+j)),g-l<=h&&(i.fullyvisible=i.fullyvisible.add(k));if(g>=h)break}if(!this.circular&&g<h){f=e;for(;;){if(--f<0)break;k=this.items().eq(f);if(k.size()===0)break;g+=this._dimension(k),i.first=k,i.visible=i.visible.add(k),l=c(k.css("margin-"+j)),g-l<=h&&(i.fullyvisible=i.fullyvisible.add(k));if(g>=h)break}}return this._update(i),this.tail=0,this.options.wrap!=="circular"&&this.options.wrap!=="custom"&&i.last.index()===this.items().size()-1&&(g-=c(i.last.css("margin-"+j)),g>h&&(this.tail=g-h)),this},_position:function(a){var b=this._first,c=d.position(b)[this.lt];return this.rtl&&!this.vertical&&(c-=this._clipping()-this._dimension(b)),this.options.center&&(c-=this._clipping()/2-this._dimension(b)/2),(a.index()>b.index()||this.inTail)&&this.tail?(c=this.rtl?c-this.tail:c+this.tail,this.inTail=!0):this.inTail=!1,-c},_update:function(b){var c=this,d={target:this._target||a(),first:this._first||a(),last:this._last||a(),visible:this._visible||a(),fullyvisible:this._fullyvisible||a()},e=(b.first||d.first).index()<d.first.index(),f,g=function(f){var g=[],h=[];b[f].each(function(){d[f].index(this)<0&&g.push(this)}),d[f].each(function(){b[f].index(this)<0&&h.push(this)}),e?g=g.reverse():h=h.reverse(),c._trigger("item"+f+"in",a(g)),c._trigger("item"+f+"out",a(h)),d[f].removeClass("jcarousel-item-"+f),b[f].addClass("jcarousel-item-"+f),c["_"+f]=b[f]};for(f in b)g(f);return this},_clipping:function(){return d["inner"+(this.vertical?"Height":"Width")](this.element())},_dimension:function(a){return d["outer"+(this.vertical?"Height":"Width")](a)}}})})(window.jQuery||window.Zepto,window);